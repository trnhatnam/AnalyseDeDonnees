---
title: "Projet analyse de données - NBA drafts"
author: "TRINH Nhat-nam, SOBCZYK Gabriel - MAIN4"
date: "2024-03-01"
output: html_document
---
# 0. Prétraitement des données
```{r}
nba_drafts_data = read.csv2("all_seasons.csv", sep=",", dec=".", header=TRUE, row.names = 1)
head(nba_drafts_data)
str(nba_drafts_data)
dim(nba_drafts_data)
```

Résumé : 
```{r}
summary(nba_drafts_data)
```
On enlève les lignes nulles
```{r}
nba_drafts_data = na.omit(nba_drafts_data)
dim(nba_drafts_data)
```


On voit que draft_year, draft_round et que draft_number sont traités comme des caractères plutôt que des nombres
```{r}
nba_drafts_data$draft_year = as.numeric(nba_drafts_data$draft_year)
nba_drafts_data$draft_round = as.numeric(nba_drafts_data$draft_round)
nba_drafts_data$draft_number = as.numeric(nba_drafts_data$draft_number)
str(nba_drafts_data)
```

#1. Etude du style de jeu avec les caractéristiques du joueurs

## Agrégation : Est ce qu-il faut aggréger les données avant avec un aggregate par joueur ?

```{r}
# On garde que les colonnes numériques mais on prend aussi les noms des joueurs
names_numes = names(which(sapply(nba_drafts_data, is.numeric)))
nba_drafts_data_study_1 = nba_drafts_data[,names_numes]
head(nba_drafts_data_study_1)
```

```{r}
nba_drafts_data_study_1 = aggregate(nba_drafts_data_study_1, by=list(nba_drafts_data$player_name), FUN=mean)
head(nba_drafts_data_study_1)
dim(nba_drafts_data_study_1)
```


##ACP
Pour une étude d'ACP, on va d'abord chercher à normaliser les données pour éviter que les grandes variances influencent les données. On va aussi prendre seulement les données qui nous intéressent
```{r}
nba_drafts_data_study_1 = nba_drafts_data_study_1[c("player_height", "player_weight", "pts", "reb", "ast", "oreb_pct", "dreb_pct")]
head(nba_drafts_data_study_1)
```
Nous effectuons une ACP
```{r}
library(FactoMineR)
ACP = PCA(nba_drafts_data_study_1)
plot.PCA(ACP)
```
Nous voyons que oreb_pct (contribution des rebonds offensives) est mal interprétée donc nous allons l'enlever.

```{r}
ACP = PCA(nba_drafts_data_study_1[c("player_height", "player_weight", "pts", "reb", "ast","dreb_pct")])
plot.PCA(ACP)
```

On regarde les contributions des axes
```{r}
barplot(cumsum(ACP$eig[,2]))
```

3 dimensions servent déjà à expliquer 80% des données.

Regardons le cercle de corrélation : 

On voit que le premier axe étudie les caractéristiques des joueurs : plus les individus ont des grandes caractéristiques, plus ils sont placés vers la droite dans le graphe de l'ACP. Ici, on voit particulièrement que la taille des joueurs NBA corrélère positivement avec leur poids ce qui semble assez logique pour des sportifs.

Le deuxième axe semble être parfaitement corrélée aux nombres de points que marque
